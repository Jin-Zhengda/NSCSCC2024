# 进展

## 时间表

| 日期         | 实现功能                  |
|:---------- | --------------------- |
| 2024.03.31 | 完成流水线基本结构，实现 ori 指令   |
| 2024.04.02 | 实现基本加减、移位、逻辑运算指令      |
| 2024.04.04 | 实现乘除运算指令              |
| 2024.04.05 | 完成已实现的所有指令的正确性验证      |
| 2024.04.06 | 实现所有运算的立即数指令并完成其正确性验证 |
| 2024.04.07 | 实现转移指令并完成其正确性验证       |
| 2024.04.09 | 实现普通访存指令              |
| 2024.04.10 | 完成普通访存指令的正确性验证        |
| 2024.04.11 | 实现原子访存指令，并完成其正确性验证    |
| 2024.04.12 | 实现基本的 CSR，实现 CSR 访问指令 |
| 2024.04.13 | 完成 CSR 访问指令的正确性验证 |
| 2024.04.15 | 基本实现例外指令，完善 CSR |
| 2024.04.16 | 实现例外优先级判断，实现中断处理 |
| 2024.04.17 | 完成例外指令的正确性验证，实现计数器模块 |
| 2024.04.18 | 实现计时器指令，完成计时器相关 CSR 和定时中断 |
| 2024.04.19 | 修改部分接口 |
| 2024.04.20 | 使用 System Verilog 重构 pc、if_id 模块 |
| 2024.04.21 | 使用 System Verilog 重构 id_dispatch、dispatch、dispatch_ex 模块 |
| 2024.04.22 | 使用 System Verilog 重构 ex、div、ex_mem、mem、mem_wb、stable_counter 模块 |
| 2024.04.23 | 使用 System Verilog 重构剩余模块 |
| 2024.04.24 | 修正部分错误，编写指令测试 | 
| 2024.04.25 | 根据测试修正部分错误 |
| 2024.04.26 | 修正当前所有指令的错误 |
| 2024.04.27 | 进行前后端对接尝试 |
| 2024.04.28 | 前后端对接成功，修复部分错误 |
| 2024.04.29 | 尝试接入 icache | 
| 2024.04.30 | 接入 icache 进行测试 |
| 2024.05.01 | 根据测试修复整体问题 |
| 2024.05.02 | 增加接口，重新接入 icache |
| 2024.05.03 | 更改前端暂停逻辑 | 
| 2024.05.07 | 重构后端访存逻辑，将访存信号提前至 ex 阶段传出 |
| 2024.05.08 | 前端流水线重构与适配前端流水线的 icache 接入 |
| 2024.05.09 | 修正前端流水线，通过全部本地测试 |
| 2024.05.10 | 接入 dcache，通过部分测试 |
| 2024.05.11 | 修正 dcache 与 LLbit 相关指令实现，通过全部本地测试 |
| 2024.05.12 | 接入 chiplab，修正所有语法错误，成功通过编译 |
| 2024.05.13 | 实例化 diff 接口，成功进入 chilap 仿真 |
| 2024.05.14 | chiplab lab3 错误，寻找错误 |
| 2024.05.15 | 发现 cacop 指令问题 |
| 2024.05.16 | 修复 icache 阻塞信号与分支清除信号的冲突 |
| 2024.05.17 | 查明局部历史的分支预测时序问题 |
| 2024.05.19 | 修复部分分支预测时序 |
| 2024.05.20 | 修正为组合逻辑读取的局部历史分支预测 |
| 2024.05.22 | 接入含有 uncache 处理的 cache，实现 TLB 相关 CSR |  

## 指令

已实现指令：

- 算数运算指令：add.w, sub.w, addi.w, lu12i.w, slt, sltu, slti, sltui, pcaddu12i, and, or, nor, xor, andi, ori, xori, mul.w, mulh.w, mulh.wu, div.w, div.wu, mod.w, mod.wu
- 移位运算指令：sll.w, srl.w, sra.w, slli.w, srli.w, srai.w
- 转移指令：beq, bne, blt, bltu, bge, bgeu, b, bl, jirl
- 普通访存指令：ld.b, ld.bu, ld.h, ld\.hu, ld.w, st.b, st.h, st.w
- 原子访存指令：ll.w, sc.w
- CSR 访问指令：csrrd, csrwr, csrxchg
- 系统异常指令：syscall, break, ertn, idle
- 计时器指令：rdcntvl.w, rdcntvh.w, rdcntid
- Cache 维护指令：cacop, perd

未实现指令：

- 浮点数指令
- 栅障指令：dbar, ibar
- TLB 维护指令：tlbsrch, tlbrd, tlbwr, tlbfill, invtlb

## 下一天的计划

- chilap 仿真测试
- 实现 TLB 相关指令
